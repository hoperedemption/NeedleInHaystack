\doxysection{http\+\_\+prot.\+h File Reference}
\hypertarget{http__prot_8h}{}\label{http__prot_8h}\index{http\_prot.h@{http\_prot.h}}


Minimal HTTP protocol services.  


{\ttfamily \#include $<$stddef.\+h$>$}\newline
Include dependency graph for http\+\_\+prot.\+h\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=143pt]{http__prot_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=197pt]{http__prot_8h__dep__incl}
\end{center}
\end{figure}
\doxysubsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structhttp__string}{http\+\_\+string}}
\item 
struct \mbox{\hyperlink{structhttp__header}{http\+\_\+header}}
\item 
struct \mbox{\hyperlink{structhttp__message}{http\+\_\+message}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{http__prot_8h_ab8949645fa8d90e1722d233c6bdfc815}\label{http__prot_8h_ab8949645fa8d90e1722d233c6bdfc815} 
\#define {\bfseries MAX\+\_\+\+HEADERS}~40
\item 
\Hypertarget{http__prot_8h_a22802a098ee78123537e6f36814c5e94}\label{http__prot_8h_a22802a098ee78123537e6f36814c5e94} 
\#define {\bfseries HTTP\+\_\+\+HDR\+\_\+\+KV\+\_\+\+DELIM}~\"{}\+: \"{}
\item 
\Hypertarget{http__prot_8h_a94c9bded9b26ea04b804317d6cedfb0f}\label{http__prot_8h_a94c9bded9b26ea04b804317d6cedfb0f} 
\#define {\bfseries HTTP\+\_\+\+LINE\+\_\+\+DELIM}~\"{}\textbackslash{}r\textbackslash{}n\"{}
\item 
\Hypertarget{http__prot_8h_afc0cfa0ceab6cf2a51f0e85288ad7828}\label{http__prot_8h_afc0cfa0ceab6cf2a51f0e85288ad7828} 
\#define {\bfseries HTTP\+\_\+\+HDR\+\_\+\+END\+\_\+\+DELIM}~HTTP\+\_\+\+LINE\+\_\+\+DELIM HTTP\+\_\+\+LINE\+\_\+\+DELIM
\item 
\Hypertarget{http__prot_8h_abec50360da62e0f9aceed542836d2e95}\label{http__prot_8h_abec50360da62e0f9aceed542836d2e95} 
\#define {\bfseries HTTP\+\_\+\+PROTOCOL\+\_\+\+ID}~\"{}HTTP/1.\+1 \"{}
\item 
\Hypertarget{http__prot_8h_a02e6d59009dee759528ec81fc9a8eeff}\label{http__prot_8h_a02e6d59009dee759528ec81fc9a8eeff} 
\#define {\bfseries HTTP\+\_\+\+OK}~\"{}200 OK\"{}
\item 
\Hypertarget{http__prot_8h_a0c1fdbbb10800664989907cbd3a5a023}\label{http__prot_8h_a0c1fdbbb10800664989907cbd3a5a023} 
\#define {\bfseries HTTP\+\_\+\+BAD\+\_\+\+REQUEST}~\"{}400 Bad Request\"{}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{http__prot_8h_a48140f5130900d824468f11bb188fc92}{http\+\_\+match\+\_\+uri}} (const struct \mbox{\hyperlink{structhttp__message}{http\+\_\+message}} \texorpdfstring{$\ast$}{*}message, const char \texorpdfstring{$\ast$}{*}target\+\_\+uri)
\begin{DoxyCompactList}\small\item\em Checks whether the {\ttfamily message} URI starts with the provided {\ttfamily target\+\_\+uri}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{http__prot_8h_a7b23050e85857e2796b5505eb0736887}{http\+\_\+parse\+\_\+message}} (const char \texorpdfstring{$\ast$}{*}stream, size\+\_\+t bytes\+\_\+received, struct \mbox{\hyperlink{structhttp__message}{http\+\_\+message}} \texorpdfstring{$\ast$}{*}out, int \texorpdfstring{$\ast$}{*}content\+\_\+len)
\begin{DoxyCompactList}\small\item\em Accepts a potentially partial TCP stream and parses an HTTP message. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{http__prot_8h_af1d37cafa53bf7f5cefc8e84c54b7820}{http\+\_\+get\+\_\+var}} (const struct \mbox{\hyperlink{structhttp__string}{http\+\_\+string}} \texorpdfstring{$\ast$}{*}url, const char \texorpdfstring{$\ast$}{*}name, char \texorpdfstring{$\ast$}{*}out, size\+\_\+t out\+\_\+len)
\begin{DoxyCompactList}\small\item\em Writes the value of parameter {\ttfamily name} from URL in message to buffer out. \end{DoxyCompactList}\item 
\Hypertarget{http__prot_8h_a0a07a320efd1b32a45b319bd25af6e5a}\label{http__prot_8h_a0a07a320efd1b32a45b319bd25af6e5a} 
int {\bfseries http\+\_\+match\+\_\+verb} (const struct \mbox{\hyperlink{structhttp__string}{http\+\_\+string}} \texorpdfstring{$\ast$}{*}method, const char \texorpdfstring{$\ast$}{*}verb)
\begin{DoxyCompactList}\small\item\em Compare method with verb and return 1 if they are equal, 0 otherwise. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Minimal HTTP protocol services. 

\begin{DoxyAuthor}{Author}
Konstantinos Prasopoulos 
\end{DoxyAuthor}


\doxysubsection{Function Documentation}
\Hypertarget{http__prot_8h_af1d37cafa53bf7f5cefc8e84c54b7820}\label{http__prot_8h_af1d37cafa53bf7f5cefc8e84c54b7820} 
\index{http\_prot.h@{http\_prot.h}!http\_get\_var@{http\_get\_var}}
\index{http\_get\_var@{http\_get\_var}!http\_prot.h@{http\_prot.h}}
\doxysubsubsection{\texorpdfstring{http\_get\_var()}{http\_get\_var()}}
{\footnotesize\ttfamily int http\+\_\+get\+\_\+var (\begin{DoxyParamCaption}\item[{const struct \mbox{\hyperlink{structhttp__string}{http\+\_\+string}} \texorpdfstring{$\ast$}{*}}]{url,  }\item[{const char \texorpdfstring{$\ast$}{*}}]{name,  }\item[{char \texorpdfstring{$\ast$}{*}}]{out,  }\item[{size\+\_\+t}]{out\+\_\+len }\end{DoxyParamCaption})}



Writes the value of parameter {\ttfamily name} from URL in message to buffer out. 

Return the length of the value. 0 or negative return values indicate an error. \Hypertarget{http__prot_8h_a48140f5130900d824468f11bb188fc92}\label{http__prot_8h_a48140f5130900d824468f11bb188fc92} 
\index{http\_prot.h@{http\_prot.h}!http\_match\_uri@{http\_match\_uri}}
\index{http\_match\_uri@{http\_match\_uri}!http\_prot.h@{http\_prot.h}}
\doxysubsubsection{\texorpdfstring{http\_match\_uri()}{http\_match\_uri()}}
{\footnotesize\ttfamily int http\+\_\+match\+\_\+uri (\begin{DoxyParamCaption}\item[{const struct \mbox{\hyperlink{structhttp__message}{http\+\_\+message}} \texorpdfstring{$\ast$}{*}}]{message,  }\item[{const char \texorpdfstring{$\ast$}{*}}]{target\+\_\+uri }\end{DoxyParamCaption})}



Checks whether the {\ttfamily message} URI starts with the provided {\ttfamily target\+\_\+uri}. 

Returns\+: 1 if it does, 0 if it does not. \Hypertarget{http__prot_8h_a7b23050e85857e2796b5505eb0736887}\label{http__prot_8h_a7b23050e85857e2796b5505eb0736887} 
\index{http\_prot.h@{http\_prot.h}!http\_parse\_message@{http\_parse\_message}}
\index{http\_parse\_message@{http\_parse\_message}!http\_prot.h@{http\_prot.h}}
\doxysubsubsection{\texorpdfstring{http\_parse\_message()}{http\_parse\_message()}}
{\footnotesize\ttfamily int http\+\_\+parse\+\_\+message (\begin{DoxyParamCaption}\item[{const char \texorpdfstring{$\ast$}{*}}]{stream,  }\item[{size\+\_\+t}]{bytes\+\_\+received,  }\item[{struct \mbox{\hyperlink{structhttp__message}{http\+\_\+message}} \texorpdfstring{$\ast$}{*}}]{out,  }\item[{int \texorpdfstring{$\ast$}{*}}]{content\+\_\+len }\end{DoxyParamCaption})}



Accepts a potentially partial TCP stream and parses an HTTP message. 

Assumes that all characters of stream that are not filled by reading are set to 0.

Places the complete HTTP message in out. Also writes the content of header \"{}\+Content Length\"{} to content\+\_\+len upon parsing the header in the stream. content\+\_\+len can be used by the caller to allocate memory to receive the whole HTTP message.

Returns\+: a negative int if there was an error 0 if the message has not been received completely (partial treatment) 1 if the message was fully received and parsed 